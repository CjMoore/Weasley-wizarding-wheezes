<h1>Username Cart</h1>
<h3 class='total'>Total: $<%= @cart.total %></h3>

<table>
  <thead>
    <tr>
        <th data-field="image">Image</th>
        <th data-field="item-name">Item</th>
        <th data-field="quantity">Quantity</th>
        <th data-field="change-quantity">Change Quantity</th>
        <th data-field="price">Price</th>
        <th data-field="price">Subtotal</th>
        <th data-field="remove">Remove</th>
    </tr>
  </thead>

  <tbody>
    <% @cart.contents.each do |item, quantity| %>
    <tr>
      <td><img src="<%=Item.find(item).image_tag%>"/></td>
      <td><%= link_to Item.find(item).title, item_path(Item.find(item)) %></td>
      <td><%= quantity %></td>
      <td>
        <%= form_for(:session, url: cart_path, method: :put) do |f| %>
          <%= f.hidden_field :item_id, value: item %>
          <%= f.label :quantity %>
          <%= f.number_field :quantity, min: 1 %>
          <%= f.submit "Update Cart" %>
        <% end %>
      </td>
      <td>$<%= Item.find(item).price %></td>
      <td>$<%= @cart.subtotal(item) %></td>
      <td><%= link_to "Remove Item", cart_path({item_id: item}), method: :delete%><td>
    </tr>
    <% end %>
  </tbody>
</table>
